<app-main-navbar></app-main-navbar>

<div class="layout">
  <!-- Sidebar Section -->
  <aside class="sidebar">
    <nav>
      <!-- Top Menu -->
      <ul class="top-menu">
        <li>
          <a routerLink="/main" class="highlight flex items-center">
            <span class="icon material-icons">Home</span>
            <img src="home-button.png" alt="Home" class="h-10 w-10 rounded-full animate-fadeIn mr-2">
          </a>
        </li>
        <li>
          <a routerLink="/trending" class="highlight flex items-center">
            <span class="icon material-icons">Trending_up</span>
            <img src="up-arrow.png" alt="Trending Up" class="h-10 w-10 rounded-full animate-fadeIn mr-2">
          </a>
        </li>
        
      </ul>

      <!-- Divider -->
      <hr class="sidebar-divider" />

      <!-- Bottom Menu -->
      <ul class="bottom-menu">
        <li>
          <a  (click)="onQuestionsClick()">
            <span class="icon material-icons">Questions</span>
            <img src="inquiry.png" alt="Questions" class="h-10 w-10 rounded-full animate-fadeIn mr-2">
          </a>
        </li>
        <li>
          <a  (click)="onUsersClick()">
            <span class="icon material-icons">Users</span>
            <img src="inquiry.png" alt="Users" class="h-10 w-10 rounded-full animate-fadeIn mr-2">
          </a>
        </li>
        
        <li>
          <a href="#" class="highlight flex items-center">
            <span class="icon material-icons">Companies</span>
            <img src="building.png" alt="Companies" class="h-10 w-10 rounded-full animate-fadeIn mr-2">
          </a>
        </li>
        
      </ul>
    </nav>
  </aside>

  <!-- Main Content Section -->
  <main class="content">
    <!-- Title and Description Section -->
    <div class="text-center mb-4">
      <h2 class="text-2xl sm:text-3xl lg:text-4xl font-bold text-blue-900 mb-3">
         Most Upvoted Questions Coming Here ! ðŸ“ˆ
      </h2>
    </div>
    

    <!-- Questions Section -->
    <div *ngIf="questions.length > 0; else noQuestions">
      <div *ngFor="let question of questions" class="question-item mb-4 p-4 border rounded-lg shadow bg-blue-50">
        
        <!-- Question Title and Body -->
        <h3 class="text-lg font-semibold text-blue-900">{{ question.title }}</h3>
        <p class="text-gray-800 mb-2">{{ question.body }}</p>

        <!-- Upvote, Downvote, and Score Section -->
        <div class="flex items-center space-x-3 text-sm mb-4">
          
          <!-- Upvote -->
          <div class="flex items-center">
            <span class="bg-green-500 text-white py-1 px-3 rounded-full text-sm font-medium hover:bg-green-600 transition">
              Upvotes: {{ question.upvotes || 0 }}
            </span>
          </div>

          <!-- Professional Separator (â€¢) -->
          <span class="text-gray-500">â€¢</span>

          <!-- Downvote -->
          <div class="flex items-center">
            <span class="bg-red-500 text-white py-1 px-3 rounded-full text-sm font-medium hover:bg-red-600 transition">
              Downvotes: {{ question.downvotes || 0 }}
            </span>
          </div>

          <!-- Professional Separator (â€¢) -->
          <span class="text-gray-500">â€¢</span>

          <!-- Score -->
          <div class="flex items-center">
            <span class="bg-blue-600 text-white py-1 px-3 rounded-full text-sm font-medium">
              Score: {{ question.score || 0 }}
            </span>
          </div>
        </div>

        <!-- Image Section with Fallback -->
        <div *ngIf="question.imageUrl" class="mt-2 mb-4">
          <img 
            [src]="question.imageUrl" 
            alt="Question Image" 
            class="rounded shadow max-w-xs cursor-pointer hover:opacity-80 transition" 
            (click)="openImageModal(question.imageUrl!)" 
            (error)="question.imageUrl = 'path_to_fallback_image.jpg'" /> <!-- Fallback image on error -->
        </div>

        <!-- Tags Section -->
        <div class="flex flex-wrap gap-2 mb-4">
          <span *ngFor="let tag of question.tags" 
                class="bg-blue-300 text-blue-800 text-xs font-semibold px-3 py-1 rounded-full hover:bg-blue-400 transition duration-200">
            {{ tag }}
          </span>
        </div>

      </div>
    </div>
    <div class="mt-6 flex gap-4 justify-center items-center">
      <button (click)="loadQuestions(pageNumber - 1)" [disabled]="pageNumber === 0" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded">Previous</button>
      <span class="font-medium text-gray-700">Page {{ pageNumber + 1 }} of {{ totalPages }}</span>
      <button (click)="loadQuestions(pageNumber + 1)" [disabled]="pageNumber >= totalPages - 1" class="px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded">Next</button>
    </div>

    <!-- No Questions Message -->
    <ng-template #noQuestions>
      <p class="text-gray-500">No trending questions at the moment.</p>
    </ng-template>
  </main>

</div>
